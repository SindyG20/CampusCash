<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Campus Cash - Log out</title>
  <style>
    :root{
      --bg:#f5f3ff;          /* light purple background */
      --card:#ffffff;
      --accent:#7c3aed;      /* primary purple */
      --accent-light:#a78bfa;/* lighter purple */
      --muted:#6b21a8;       /* deep purple for text */
      --danger:#dc2626;      /* red for logout */
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg); color:#1f2937; min-height:100vh; display:flex; align-items:center; justify-content:center;
      padding:24px;
    }
    .container{width:100%; max-width:980px}
    header{display:flex; align-items:center; justify-content:space-between; margin-bottom:24px}
    .brand{display:flex; gap:12px; align-items:center}
    .logo{
      width:44px; height:44px; border-radius:8px; background:linear-gradient(135deg,#7c3aed,#a78bfa);
      display:flex; align-items:center; justify-content:center; color:white; font-weight:700;
    }
    nav a, nav button{margin-left:12px; text-decoration:none; color:var(--muted); background:none; border:none; cursor:pointer; font:inherit}
    .card{background:var(--card); border-radius:12px; padding:28px; box-shadow:0 8px 30px rgba(124,58,237,0.2)}
    .btn{
      display:inline-block; padding:10px 16px; border-radius:8px; text-decoration:none; cursor:pointer;
      font-weight:600; border:0;
    }
    .btn-primary{background:var(--accent); color:white}
    .btn-ghost{background:transparent; color:var(--accent); border:1px solid var(--accent-light)}
    .btn-danger{background:var(--danger); color:white}
    .actions{display:flex; gap:12px; margin-top:18px}
    /* modal */
    .modal-backdrop{position:fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(88,28,135,0.5); z-index:50}
    .modal{background:var(--card); border-radius:12px; padding:20px; width: min(520px, 94%); box-shadow:0 10px 40px rgba(88,28,135,0.4)}
    .modal h3{margin:0 0 8px 0; color:var(--accent)}
    .modal p{margin:0 0 16px 0; color:#4b5563}
    .modal .modal-actions{display:flex; gap:12px; justify-content:flex-end}
    @media (max-width:560px){
      header{flex-direction:column; align-items:flex-start; gap:12px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">CC</div>
        <div>
          <div style="font-weight:700;color:var(--muted)">Campus Cash</div>
          <div style="font-size:13px;color:var(--accent-light)">Student banking simplified</div>
        </div>
      </div>
      <nav>
        <a href="home.html">Dashboard / Home</a>
        <a href="profile.html">Profile</a>
        <button id="logoutBtn" class="btn btn-ghost" aria-haspopup="dialog">Log out</button>
      </nav>
    </header>

    <main class="card" role="main" aria-labelledby="title">
      <h1 id="title" style="margin:0 0 8px 0; color:var(--accent)">Log out</h1>
      <p style="margin:0;color:#4b5563">
        Click the button below to sign out of Campus Cash. We'll ask for confirmation before redirecting you back to the home page.
      </p>

      <div class="actions">
        <a href="home.html" class="btn btn-primary" role="button">Return to dashboard/home</a>
        <button id="logoutBtn2" class="btn btn-danger">Log out</button>
      </div>
    </main>
  </div>

  <!-- Confirmation modal -->
  <div id="confirmModal" class="modal-backdrop" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal" role="document">
      <h3 id="modalTitle">Are you sure you want to log out?</h3>
      <p>Logging out will end your session on this device. You will be redirected to the home page (index.html).</p>
      <div class="modal-actions">
        <button id="cancelBtn" class="btn btn-ghost">Cancel</button>
        <button id="confirmBtn" class="btn btn-danger">Yes, log out</button>
      </div>
    </div>
  </div>

  <script>
    const logoutButtons = [document.getElementById('logoutBtn'), document.getElementById('logoutBtn2')];
    const backdrop = document.getElementById('confirmModal');
    const cancelBtn = document.getElementById('cancelBtn');
    const confirmBtn = document.getElementById('confirmBtn');

    function openModal(){
      backdrop.style.display = 'flex';
      backdrop.setAttribute('aria-hidden','false');
      confirmBtn.focus();
      document.addEventListener('keydown', handleKey);
    }
    function closeModal(){
      backdrop.style.display = 'none';
      backdrop.setAttribute('aria-hidden','true');
      document.removeEventListener('keydown', handleKey);
    }
    function handleKey(e){
      if(e.key === 'Escape') closeModal();
      if(e.key === 'Enter' && backdrop.style.display === 'flex') doLogout();
    }

    logoutButtons.forEach(b => b && b.addEventListener('click', openModal));
    cancelBtn.addEventListener('click', closeModal);

    function doLogout(){
      sessionStorage.clear();
      localStorage.removeItem('campusCashUser'); // only remove login session

      window.location.href = '/indexFolder/index.html';
    }

    confirmBtn.addEventListener('click', () => {
      confirmBtn.disabled = true;
      confirmBtn.textContent = 'Signing out...';
      doLogout();
    });

    backdrop.addEventListener('click', (e) => { if (e.target === backdrop) closeModal(); });
  </script>
</body>
</html>