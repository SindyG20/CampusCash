<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Campus Cash — Profile</title>
  <style>
    :root{--bg:#f4f6f8;--card:#fff;--accent:#4a148c;--muted:#e0d7f3}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);font-family:Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:#111}

    /* Top Purple Header */
    .topbar{
      background:var(--accent);
      color:#fff;
      padding:14px 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      box-shadow:0 4px 12px rgba(0,0,0,0.1);
    }
    .logo{display:flex;align-items:center;gap:12px}
    .logo .brand{font-weight:700;font-size:1.25rem;color:#fff}
    .logo img{border-radius:8px}
    .nav{display:flex;gap:20px}
    .nav a{text-decoration:none;color:#fff;font-weight:500;cursor:pointer;transition:.2s}
    .nav a:hover{color:#d1c4e9}
    .nav a.active{color:#d1c4e9;font-weight:700}

    /* Main Container */
    .container{max-width:960px;margin:40px auto;padding:20px}

    /* Profile Card */
    .card{background:var(--card);border-radius:12px;box-shadow:0 6px 20px rgba(12,20,40,0.06);padding:24px;display:grid;grid-template-columns:140px 1fr;gap:20px;align-items:start;margin-bottom:20px}
    .avatar{width:120px;height:120px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,#ede7f6,#f3e5f5);display:flex;align-items:center;justify-content:center;font-size:3rem;color:#6b4ca0}
    .info h2{margin:0 0 6px 0;font-size:1.25rem}
    .info p{margin:0 4px 10px 0;color:#555}
    .chip{background:#f3f4f6;padding:8px 12px;border-radius:999px;font-size:0.9rem;color:#374151;display:inline-block;margin-right:6px;margin-top:6px}
    .details{margin-top:12px;display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .details div{background:#f9f6fb;padding:10px 14px;border-radius:8px}
    .details strong{display:block;font-size:.85rem;color:#555}
    .details span{font-size:1rem;color:#111}
    .btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:600;text-decoration:none;display:inline-block;margin-top:20px}
    .btn.secondary{background:transparent;color:var(--accent);border:1px solid rgba(74,20,140,0.2)}
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <div class="header">
      <div class="logo">
        <img src="../indexFolder/logo.png" alt="Campus Cash Logo" width="40" height="40" style="border-radius:8px"/>
        <div class="brand">Campus Cash</div>
      </div>
      <div class="nav">
        <a href="../HomePage/home.html">Home</a>
        <a href="logOut.html">Logout</a>
      </div>
    </div>

  <div class="container">
    <!-- Profile Card -->
    <main class="card">
      <div>
        <div id="avatar" class="avatar">--</div>
      </div>
      <div class="info">
        <h2 id="displayName">Loading...</h2>
        <p id="displayEmail"></p>
        <div class="chip" id="displayNumber"></div>
        <div class="chip">Member since: <span id="displaySince"></span></div>

        <div class="details">
          <div><strong>Student ID</strong><span id="displayId">--</span></div>
          <div><strong>Student Number</strong><span id="displayNumberDetail">--</span></div>
          <div><strong>Date of Birth</strong><span id="displayDOB">--</span></div>
          <div><strong>Address</strong><span id="displayAddress">--</span></div>
          <div><strong>Account Type</strong><span id="displayAccountType">--</span></div>
          <div><strong>Created At</strong><span id="displayCreated">--</span></div>
        </div>

        <a href="/HomePage/home.html" class="btn secondary">← Back to Home</a>
      </div>
    </main>
  </div>

  <script>
  const userData = JSON.parse(localStorage.getItem("campusCashUser"));
  function initials(name){
    if(!name) return "--";
    return name.split(" ").map(n=>n[0]||"").join("").toUpperCase();
  }
  if(userData){
    document.getElementById("displayName").textContent = userData.fullName || "Student";
    document.getElementById("displayEmail").textContent = userData.email || "";
    document.getElementById("displayNumber").textContent = "Student No: " + (userData.studentNumber || "--");
    document.getElementById("displayId").textContent = userData.studentId || "--";
    document.getElementById("displayNumberDetail").textContent = userData.studentNumber || "--";

    // ✅ Fixed Date of Birth (consistent key)
    document.getElementById("displayDOB").textContent = userData.dateOfBirth || "--";

    document.getElementById("displayAddress").textContent = userData.address || "--";
    document.getElementById("displayAccountType").textContent = userData.accountType || "--";
    document.getElementById("displayCreated").textContent = new Date(userData.createdAt).toLocaleString();
    document.getElementById("displaySince").textContent = new Date(userData.createdAt).toLocaleDateString();
    document.getElementById("avatar").textContent = initials(userData.fullName);
  }
</script>

</body>
</html>